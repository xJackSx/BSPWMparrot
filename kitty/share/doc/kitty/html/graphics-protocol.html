<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta property="og:title" content="Terminal graphics protocol" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://sw.kovidgoyal.net/kitty/graphics-protocol.html" />
<meta property="og:site_name" content="kitty" />
<meta property="og:description" content="The goal of this specification is to create a flexible and performant protocol that allows the program running in the terminal, hereafter called the client, to render arbitrary pixel (raster) graph..." />
<meta property="og:image" content="https://sw.kovidgoyal.net/kitty/None" />
<meta property="og:image:alt" content="The goal of this specification is to create a flexible and performant protocol that allows the program running in the terminal, hereafter called the client,..." />
<meta name="description" content="The goal of this specification is to create a flexible and performant protocol that allows the program running in the terminal, hereafter called the client, to render arbitrary pixel (raster) graph..." />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Comprehensive keyboard handling in terminals" href="keyboard-protocol.html" /><link rel="prev" title="Colored and styled underlines" href="underlines.html" />

    <link rel="shortcut icon" href="_static/kitty.svg"/><!-- Generated with Sphinx 6.1.3 and Furo 2023.03.27 -->
        <title>Terminal graphics protocol - kitty</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style>

  </head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">kitty</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/kitty.svg" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="quickstart.html">Quickstart</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="binary.html">Install kitty</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="binary.html#binary-install">Binary install</a></li>
<li class="toctree-l3"><a class="reference internal" href="binary.html#manually-installing">Manually installing</a></li>
<li class="toctree-l3"><a class="reference internal" href="binary.html#desktop-integration-on-linux">Desktop integration on Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="binary.html#customizing-the-installation">Customizing the installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="binary.html#uninstalling">Uninstalling</a></li>
<li class="toctree-l3"><a class="reference internal" href="binary.html#building-from-source">Building from source</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="build.html">Build from source</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="build.html#dependencies">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html#install-and-run-from-source">Install and run from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html#building-kitty-app-on-macos-from-source">Building kitty.app on macOS from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html#build-and-run-from-source-with-nix">Build and run from source with Nix</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html#debug-builds">Debug builds</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html#notes-for-linux-macos-packagers">Notes for Linux/macOS packagers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="overview.html">Overview</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#design-philosophy">Design philosophy</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#tabs-and-windows">Tabs and Windows</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="overview.html#scrolling">Scrolling</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#tabs">Tabs</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#other-keyboard-shortcuts">Other keyboard shortcuts</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#configuring-kitty">Configuring kitty</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="conf.html">kitty.conf</a></li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#fonts">Fonts</a></li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#cursor-customization">Cursor customization</a></li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#scrollback">Scrollback</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="conf.html#mouse">Mouse</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="conf.html#mouse-actions">Mouse actions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#performance-tuning">Performance tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#terminal-bell">Terminal bell</a></li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#window-layout">Window layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#tab-bar">Tab bar</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="conf.html#color-scheme">Color scheme</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="conf.html#the-color-table">The color table</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#advanced">Advanced</a></li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#os-specific-tweaks">OS specific tweaks</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="conf.html#keyboard-shortcuts">Keyboard shortcuts</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="conf.html#clipboard">Clipboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="conf.html#scrolling">Scrolling</a></li>
<li class="toctree-l4"><a class="reference internal" href="conf.html#window-management">Window management</a></li>
<li class="toctree-l4"><a class="reference internal" href="conf.html#tab-management">Tab management</a></li>
<li class="toctree-l4"><a class="reference internal" href="conf.html#layout-management">Layout management</a></li>
<li class="toctree-l4"><a class="reference internal" href="conf.html#font-sizes">Font sizes</a></li>
<li class="toctree-l4"><a class="reference internal" href="conf.html#select-and-act-on-visible-text">Select and act on visible text</a></li>
<li class="toctree-l4"><a class="reference internal" href="conf.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="conf.html#sample-kitty-conf">Sample kitty.conf</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="conf.html#all-mappable-actions">All mappable actions</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="actions.html">Mappable actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#copy-paste">Copy/paste</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#debugging">Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#layouts">Layouts</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#marks">Marks</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#miscellaneous">Miscellaneous</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#mouse-actions">Mouse actions</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#scrolling">Scrolling</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#tab-management">Tab management</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions.html#window-management">Window management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#layouts">Layouts</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="layouts.html">Arrange windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#the-stack-layout">The Stack Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#the-tall-layout">The Tall Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#the-fat-layout">The Fat Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#the-grid-layout">The Grid Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#the-splits-layout">The Splits Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#the-horizontal-layout">The Horizontal Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#the-vertical-layout">The Vertical Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="layouts.html#resizing-windows">Resizing windows</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#extending-kitty">Extending kitty</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="kittens_intro.html">Extend with kittens</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/icat.html">icat</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/icat.html#source-code-for-icat">Source code for icat</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/icat.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/icat.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/diff.html">kitty-diff</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#major-features">Major Features</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#installation">Installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#usage">Usage</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#keyboard-controls">Keyboard controls</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#integrating-with-git">Integrating with git</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#why-does-this-work-only-in-kitty">Why does this work only in kitty?</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#configuration">Configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#diffing">Diffing</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#colors">Colors</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#keyboard-shortcuts">Keyboard shortcuts</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#source-code-for-diff">Source code for diff</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/diff.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/diff.html#options">Options</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="kittens/diff.html#sample-diff-conf">Sample diff.conf</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/unicode_input.html">Unicode input</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/unicode_input.html#source-code-for-unicode-input">Source code for unicode_input</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/unicode_input.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/unicode_input.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/themes.html">Changing kitty colors</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/themes.html#how-it-works">How it works</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/themes.html#using-your-own-themes">Using your own themes</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/themes.html#contributing-new-themes">Contributing new themes</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/themes.html#changing-the-theme-non-interactively">Changing the theme non-interactively</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/themes.html#source-code-for-themes">Source code for themes</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/themes.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/themes.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/hints.html">Hints</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/hints.html#completely-customizing-the-matching-and-actions-of-the-kitten">Completely customizing the matching and actions of the kitten</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/hints.html#source-code-for-hints">Source code for hints</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/hints.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/hints.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="kittens/remote_file.html">Remote files</a></li>
<li class="toctree-l4"><a class="reference internal" href="kittens/hyperlinked_grep.html">Hyperlinked grep</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/transfer.html">Transfer files</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/transfer.html#basic-usage">Basic usage</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/transfer.html#avoiding-the-confirmation-prompt">Avoiding the confirmation prompt</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/transfer.html#delta-transfers">Delta transfers</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/transfer.html#source-code-for-transfer">Source code for transfer</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/transfer.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/transfer.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/ssh.html">Truly convenient SSH</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/ssh.html#a-real-world-example">A real world example</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/ssh.html#how-it-works">How it works</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/ssh.html#host-bootstrap-configuration">Host bootstrap configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/ssh.html#login-shell-environment">Login shell environment</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/ssh.html#ssh-configuration">SSH configuration</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/ssh.html#the-copy-command">The copy command</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/ssh.html#options">Options</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="kittens/ssh.html#copying-terminfo-files-manually">Copying terminfo files manually</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/custom.html">Custom kittens</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#kitty-api-to-use-with-kittens">kitty API to use with kittens</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#passing-arguments-to-kittens">Passing arguments to kittens</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#passing-the-contents-of-the-screen-to-the-kitten">Passing the contents of the screen to the kitten</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#using-kittens-to-script-kitty-without-any-terminal-ui">Using kittens to script kitty, without any terminal UI</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#sending-mouse-events">Sending mouse events</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#debugging-kittens">Debugging kittens</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#adding-options-to-kittens">Adding options to kittens</a></li>
<li class="toctree-l5"><a class="reference internal" href="kittens/custom.html#kittens-created-by-kitty-users">Kittens created by kitty users</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/broadcast.html">broadcast</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/broadcast.html#source-code-for-broadcast">Source code for broadcast</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/broadcast.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/broadcast.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/clipboard.html">clipboard</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/clipboard.html#source-code-for-clipboard">Source code for clipboard</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/clipboard.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/clipboard.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/panel.html">Draw a GPU accelerated dock panel on your desktop</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/panel.html#source-code-for-panel">Source code for panel</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/panel.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/panel.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="kittens/query_terminal.html">Query terminal</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="kittens/query_terminal.html#source-code-for-query-terminal">Source code for query_terminal</a></li>
<li class="toctree-l5 has-children"><a class="reference internal" href="kittens/query_terminal.html#command-line-interface">Command Line Interface</a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="kittens/query_terminal.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#remote-control">Remote control</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html">Control kitty from scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#tutorial">Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#remote-control-via-a-socket">Remote control via a socket</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#the-builtin-kitty-shell">The builtin kitty shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#allowing-only-some-windows-to-control-kitty">Allowing only some windows to control kitty</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#fine-grained-permissions-for-remote-control">Fine grained permissions for remote control</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#customizing-authorization-with-your-own-program">Customizing authorization with your own program</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#mapping-key-presses-to-remote-control-commands">Mapping key presses to remote control commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#broadcasting-what-you-type-to-all-kitty-windows">Broadcasting what you type to all kitty windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#the-remote-control-protocol">The remote control protocol</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#matching-windows-and-tabs">Matching windows and tabs</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="rc_protocol.html">The kitty remote control protocol</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#encrypted-communication">Encrypted communication</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#async-and-streaming-requests">Async and streaming requests</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#close-tab">close-tab</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#close-window">close-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#create-marker">create-marker</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#detach-tab">detach-tab</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#detach-window">detach-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#disable-ligatures">disable-ligatures</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#env">env</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#focus-tab">focus-tab</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#focus-window">focus-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#get-colors">get-colors</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#get-text">get-text</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#goto-layout">goto-layout</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#kitten">kitten</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#last-used-layout">last-used-layout</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#launch">launch</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#ls">ls</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#new-window">new-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#remove-marker">remove-marker</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#resize-os-window">resize-os-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#resize-window">resize-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#scroll-window">scroll-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#select-window">select-window</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#send-text">send-text</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-background-image">set-background-image</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-background-opacity">set-background-opacity</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-colors">set-colors</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-enabled-layouts">set-enabled-layouts</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-font-size">set-font-size</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-spacing">set-spacing</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-tab-color">set-tab-color</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-tab-title">set-tab-title</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-window-logo">set-window-logo</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#set-window-title">set-window-title</a></li>
<li class="toctree-l5"><a class="reference internal" href="rc_protocol.html#signal-child">signal-child</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty">kitty @</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#options">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-close-tab">kitty @ close-tab</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id1">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-close-window">kitty @ close-window</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id2">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-create-marker">kitty @ create-marker</a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id3">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-detach-tab">kitty @ detach-tab</a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id4">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-detach-window">kitty @ detach-window</a><input class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id5">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-disable-ligatures">kitty @ disable-ligatures</a><input class="toctree-checkbox" id="toctree-checkbox-47" name="toctree-checkbox-47" role="switch" type="checkbox"/><label for="toctree-checkbox-47"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id6">Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="remote-control.html#kitty-env">kitty @ env</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-focus-tab">kitty @ focus-tab</a><input class="toctree-checkbox" id="toctree-checkbox-48" name="toctree-checkbox-48" role="switch" type="checkbox"/><label for="toctree-checkbox-48"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id7">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-focus-window">kitty @ focus-window</a><input class="toctree-checkbox" id="toctree-checkbox-49" name="toctree-checkbox-49" role="switch" type="checkbox"/><label for="toctree-checkbox-49"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id8">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-get-colors">kitty @ get-colors</a><input class="toctree-checkbox" id="toctree-checkbox-50" name="toctree-checkbox-50" role="switch" type="checkbox"/><label for="toctree-checkbox-50"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id9">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-get-text">kitty @ get-text</a><input class="toctree-checkbox" id="toctree-checkbox-51" name="toctree-checkbox-51" role="switch" type="checkbox"/><label for="toctree-checkbox-51"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id10">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-goto-layout">kitty @ goto-layout</a><input class="toctree-checkbox" id="toctree-checkbox-52" name="toctree-checkbox-52" role="switch" type="checkbox"/><label for="toctree-checkbox-52"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id11">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-kitten">kitty @ kitten</a><input class="toctree-checkbox" id="toctree-checkbox-53" name="toctree-checkbox-53" role="switch" type="checkbox"/><label for="toctree-checkbox-53"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id12">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-last-used-layout">kitty @ last-used-layout</a><input class="toctree-checkbox" id="toctree-checkbox-54" name="toctree-checkbox-54" role="switch" type="checkbox"/><label for="toctree-checkbox-54"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id13">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-launch">kitty @ launch</a><input class="toctree-checkbox" id="toctree-checkbox-55" name="toctree-checkbox-55" role="switch" type="checkbox"/><label for="toctree-checkbox-55"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id14">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-ls">kitty @ ls</a><input class="toctree-checkbox" id="toctree-checkbox-56" name="toctree-checkbox-56" role="switch" type="checkbox"/><label for="toctree-checkbox-56"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id15">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-new-window">kitty @ new-window</a><input class="toctree-checkbox" id="toctree-checkbox-57" name="toctree-checkbox-57" role="switch" type="checkbox"/><label for="toctree-checkbox-57"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id16">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-remove-marker">kitty @ remove-marker</a><input class="toctree-checkbox" id="toctree-checkbox-58" name="toctree-checkbox-58" role="switch" type="checkbox"/><label for="toctree-checkbox-58"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id17">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-resize-os-window">kitty @ resize-os-window</a><input class="toctree-checkbox" id="toctree-checkbox-59" name="toctree-checkbox-59" role="switch" type="checkbox"/><label for="toctree-checkbox-59"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id18">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-resize-window">kitty @ resize-window</a><input class="toctree-checkbox" id="toctree-checkbox-60" name="toctree-checkbox-60" role="switch" type="checkbox"/><label for="toctree-checkbox-60"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id19">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-scroll-window">kitty @ scroll-window</a><input class="toctree-checkbox" id="toctree-checkbox-61" name="toctree-checkbox-61" role="switch" type="checkbox"/><label for="toctree-checkbox-61"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id20">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-select-window">kitty @ select-window</a><input class="toctree-checkbox" id="toctree-checkbox-62" name="toctree-checkbox-62" role="switch" type="checkbox"/><label for="toctree-checkbox-62"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id21">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-send-text">kitty @ send-text</a><input class="toctree-checkbox" id="toctree-checkbox-63" name="toctree-checkbox-63" role="switch" type="checkbox"/><label for="toctree-checkbox-63"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id22">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-background-image">kitty @ set-background-image</a><input class="toctree-checkbox" id="toctree-checkbox-64" name="toctree-checkbox-64" role="switch" type="checkbox"/><label for="toctree-checkbox-64"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id23">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-background-opacity">kitty @ set-background-opacity</a><input class="toctree-checkbox" id="toctree-checkbox-65" name="toctree-checkbox-65" role="switch" type="checkbox"/><label for="toctree-checkbox-65"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id24">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-colors">kitty @ set-colors</a><input class="toctree-checkbox" id="toctree-checkbox-66" name="toctree-checkbox-66" role="switch" type="checkbox"/><label for="toctree-checkbox-66"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id25">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-enabled-layouts">kitty @ set-enabled-layouts</a><input class="toctree-checkbox" id="toctree-checkbox-67" name="toctree-checkbox-67" role="switch" type="checkbox"/><label for="toctree-checkbox-67"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id26">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-font-size">kitty @ set-font-size</a><input class="toctree-checkbox" id="toctree-checkbox-68" name="toctree-checkbox-68" role="switch" type="checkbox"/><label for="toctree-checkbox-68"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id27">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-spacing">kitty @ set-spacing</a><input class="toctree-checkbox" id="toctree-checkbox-69" name="toctree-checkbox-69" role="switch" type="checkbox"/><label for="toctree-checkbox-69"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id28">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-tab-color">kitty @ set-tab-color</a><input class="toctree-checkbox" id="toctree-checkbox-70" name="toctree-checkbox-70" role="switch" type="checkbox"/><label for="toctree-checkbox-70"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id29">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-tab-title">kitty @ set-tab-title</a><input class="toctree-checkbox" id="toctree-checkbox-71" name="toctree-checkbox-71" role="switch" type="checkbox"/><label for="toctree-checkbox-71"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id30">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-window-logo">kitty @ set-window-logo</a><input class="toctree-checkbox" id="toctree-checkbox-72" name="toctree-checkbox-72" role="switch" type="checkbox"/><label for="toctree-checkbox-72"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id31">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-set-window-title">kitty @ set-window-title</a><input class="toctree-checkbox" id="toctree-checkbox-73" name="toctree-checkbox-73" role="switch" type="checkbox"/><label for="toctree-checkbox-73"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id32">Options</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="remote-control.html#kitty-signal-child">kitty @ signal-child</a><input class="toctree-checkbox" id="toctree-checkbox-74" name="toctree-checkbox-74" role="switch" type="checkbox"/><label for="toctree-checkbox-74"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="remote-control.html#id33">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#startup-sessions">Startup Sessions</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#creating-tabs-windows">Creating tabs/windows</a><input class="toctree-checkbox" id="toctree-checkbox-75" name="toctree-checkbox-75" role="switch" type="checkbox"/><label for="toctree-checkbox-75"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="launch.html">The <strong class="command">launch</strong> command</a></li>
<li class="toctree-l3"><a class="reference internal" href="launch.html#the-piping-environment">The piping environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="launch.html#special-arguments">Special arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="launch.html#watching-launched-windows">Watching launched windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="launch.html#finding-executables">Finding executables</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="launch.html#syntax-reference">Syntax reference</a><input class="toctree-checkbox" id="toctree-checkbox-76" name="toctree-checkbox-76" role="switch" type="checkbox"/><label for="toctree-checkbox-76"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="launch.html#options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#mouse-features">Mouse features</a><input class="toctree-checkbox" id="toctree-checkbox-77" name="toctree-checkbox-77" role="switch" type="checkbox"/><label for="toctree-checkbox-77"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="open_actions.html">Scripting the mouse click</a><input class="toctree-checkbox" id="toctree-checkbox-78" name="toctree-checkbox-78" role="switch" type="checkbox"/><label for="toctree-checkbox-78"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="open_actions.html#matching-criteria">Matching criteria</a></li>
<li class="toctree-l4"><a class="reference internal" href="open_actions.html#scripting-the-opening-of-files-with-kitty-on-macos">Scripting the opening of files with kitty on macOS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#font-control">Font control</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#the-scrollback-buffer">The scrollback buffer</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#integration-with-shells">Integration with shells</a><input class="toctree-checkbox" id="toctree-checkbox-79" name="toctree-checkbox-79" role="switch" type="checkbox"/><label for="toctree-checkbox-79"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html">Shell integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#features">Features</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="shell-integration.html#configuration">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-80" name="toctree-checkbox-80" role="switch" type="checkbox"/><label for="toctree-checkbox-80"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="shell-integration.html#more-ways-to-browse-command-output">More ways to browse command output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#how-it-works">How it works</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#shell-integration-over-ssh">Shell integration over SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#clone-the-current-shell-into-a-new-window">Clone the current shell into a new window</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#edit-files-in-new-kitty-windows-even-over-ssh">Edit files in new kitty windows even over SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#manual-shell-integration">Manual shell integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#integration-with-other-shells">Integration with other shells</a></li>
<li class="toctree-l3"><a class="reference internal" href="shell-integration.html#notes-for-shell-developers">Notes for shell developers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#multiple-copy-paste-buffers">Multiple copy/paste buffers</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="overview.html#marks">Marks</a><input class="toctree-checkbox" id="toctree-checkbox-81" name="toctree-checkbox-81" role="switch" type="checkbox"/><label for="toctree-checkbox-81"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="marks.html">Mark text on screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="marks.html#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="marks.html#creating-markers-dynamically">Creating markers dynamically</a></li>
<li class="toctree-l3"><a class="reference internal" href="marks.html#scrolling-to-marks">Scrolling to marks</a></li>
<li class="toctree-l3"><a class="reference internal" href="marks.html#the-full-syntax-for-creating-marks">The full syntax for creating marks</a></li>
<li class="toctree-l3"><a class="reference internal" href="marks.html#arbitrary-marker-functions">Arbitrary marker functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><input class="toctree-checkbox" id="toctree-checkbox-82" name="toctree-checkbox-82" role="switch" type="checkbox"/><label for="toctree-checkbox-82"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#some-special-symbols-are-rendered-small-truncated-in-kitty">Some special symbols are rendered small/truncated in kitty?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#using-a-color-theme-with-a-background-color-does-not-work-well-in-vim">Using a color theme with a background color does not work well in vim?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-get-errors-about-the-terminal-being-unknown-or-opening-the-terminal-failing-or-functional-keys-like-arrow-keys-don-t-work">I get errors about the terminal being unknown or opening the terminal failing or functional keys like arrow keys don't work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-cannot-use-the-key-combination-x-in-program-y">I cannot use the key combination X in program Y?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-change-the-colors-in-a-running-kitty-instance">How do I change the colors in a running kitty instance?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-specify-command-line-options-for-kitty-on-macos">How do I specify command line options for kitty on macOS?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-catted-a-binary-file-and-now-kitty-is-hung">I catted a binary file and now kitty is hung?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#kitty-is-not-able-to-use-my-favorite-font">kitty is not able to use my favorite font?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-assign-a-single-global-shortcut-to-bring-up-the-kitty-terminal">How can I assign a single global shortcut to bring up the kitty terminal?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-do-not-like-the-kitty-icon">I do not like the kitty icon!</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-map-key-presses-in-kitty-to-different-keys-in-the-terminal-program">How do I map key presses in kitty to different keys in the terminal program?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-open-a-new-window-or-tab-with-the-same-working-directory-as-the-current-window">How do I open a new window or tab with the same working directory as the current window?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#things-behave-differently-when-running-kitty-from-system-launcher-vs-from-another-terminal">Things behave differently when running kitty from system launcher vs. from another terminal?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-am-using-tmux-and-have-a-problem">I am using tmux and have a problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-opened-and-closed-a-lot-of-windows-tabs-and-top-shows-kitty-s-memory-usage-is-very-high">I opened and closed a lot of windows/tabs and top shows kitty's memory usage is very high?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#why-does-kitty-sometimes-start-slowly-on-my-linux-system">Why does kitty sometimes start slowly on my Linux system?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support kitty development </a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="changelog.html">Changelog</a><input class="toctree-checkbox" id="toctree-checkbox-83" name="toctree-checkbox-83" role="switch" type="checkbox"/><label for="toctree-checkbox-83"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="changelog.html#recent-major-new-features">Recent major new features</a><input class="toctree-checkbox" id="toctree-checkbox-84" name="toctree-checkbox-84" role="switch" type="checkbox"/><label for="toctree-checkbox-84"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#truly-convenient-ssh">Truly convenient SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#shell-integration">Shell integration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="changelog.html#detailed-list-of-changes">Detailed list of changes</a><input class="toctree-checkbox" id="toctree-checkbox-85" name="toctree-checkbox-85" role="switch" type="checkbox"/><label for="toctree-checkbox-85"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#future">0.28.0 [future]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id1">0.27.1 [2023-02-07]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id2">0.27.0 [2023-01-31]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id3">0.26.5 [2022-11-07]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id4">0.26.4 [2022-10-17]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id5">0.26.3 [2022-09-22]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id6">0.26.2 [2022-09-05]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id7">0.26.1 [2022-08-30]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id8">0.26.0 [2022-08-29]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id9">0.25.2 [2022-06-07]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id10">0.25.1 [2022-05-26]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id11">0.25.0 [2022-04-11]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id12">0.24.4 [2022-03-03]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id13">0.24.3 [2022-02-28]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id14">0.24.2 [2022-02-03]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id15">0.24.1 [2022-01-06]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id16">0.24.0 [2022-01-04]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id17">0.23.1 [2021-08-17]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id18">0.23.0 [2021-08-16]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id19">0.22.2 [2021-08-02]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id20">0.22.1 [2021-07-31]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id21">0.22.0 [2021-07-26]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id22">0.21.2 [2021-06-28]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id23">0.21.1 [2021-06-14]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id24">0.21.0 [2021-06-12]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id25">0.20.3 [2021-05-06]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id26">0.20.2 [2021-04-28]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id27">0.20.1 [2021-04-19]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id28">0.20.0 [2021-04-19]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id29">0.19.3 [2020-12-19]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id30">0.19.2 [2020-11-13]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id31">0.19.1 [2020-10-06]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id32">0.19.0 [2020-10-04]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id33">0.18.3 [2020-08-11]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id34">0.18.2 [2020-07-28]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id35">0.18.1 [2020-06-23]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id36">0.18.0 [2020-06-20]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id37">0.17.4 [2020-05-09]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id38">0.17.3 [2020-04-23]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id39">0.17.2 [2020-03-29]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id40">0.17.1 [2020-03-24]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id41">0.17.0 [2020-03-24]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id42">0.16.0 [2020-01-28]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id43">0.15.1 [2019-12-21]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id44">0.15.0 [2019-11-27]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id45">0.14.6 [2019-09-25]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id46">0.14.5 [2019-09-23]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id47">0.14.4 [2019-08-31]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id48">0.14.3 [2019-07-29]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id49">0.14.2 [2019-06-09]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id50">0.14.1 [2019-05-29]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id51">0.14.0 [2019-05-24]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id52">0.13.3 [2019-01-19]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id53">0.13.2 [2019-01-04]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id54">0.13.1 [2018-12-06]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id55">0.13.0 [2018-12-05]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id56">0.12.3 [2018-09-29]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id57">0.12.2 [2018-09-24]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id58">0.12.1 [2018-09-08]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id59">0.12.0 [2018-09-01]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id60">0.11.3 [2018-07-10]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id61">0.11.2 [2018-07-01]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id62">0.11.1 [2018-06-17]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id63">0.11.0 [2018-06-12]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id64">0.10.1 [2018-05-24]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id65">0.10.0 [2018-05-21]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id66">0.9.1 [2018-05-05]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id67">0.9.0 [2018-04-15]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id68">0.8.4 [2018-03-31]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id69">0.8.3 [2018-03-29]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id70">0.8.2 [2018-03-17]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id71">0.8.1 [2018-03-09]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id72">0.8.0 [2018-02-24]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id73">0.7.1 [2018-01-31]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id74">0.7.0 [2018-01-24]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id75">0.6.1 [2017-12-28]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id76">0.6.0 [2017-12-18]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id77">0.5.1 [2017-12-01]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id78">0.5.0 [2017-11-19]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id79">0.4.2 [2017-10-23]</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id80">0.4.0 [2017-10-22]</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="integrations.html">Integrations with other tools</a><input class="toctree-checkbox" id="toctree-checkbox-86" name="toctree-checkbox-86" role="switch" type="checkbox"/><label for="toctree-checkbox-86"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#image-and-document-viewers">Image and document viewers</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#system-and-data-visualisation-tools">System and data visualisation tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#editor-integration">Editor integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#scrollback-manipulation">Scrollback manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrations.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="protocol-extensions.html">Terminal protocol extensions</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-87" name="toctree-checkbox-87" role="switch" type="checkbox"/><label for="toctree-checkbox-87"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="underlines.html">Colored and styled underlines</a></li>
<li class="toctree-l2 current has-children current-page"><a class="current reference internal" href="#">Terminal graphics protocol</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-88" name="toctree-checkbox-88" role="switch" type="checkbox"/><label for="toctree-checkbox-88"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-the-window-size">Getting the window size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#a-minimal-example">A minimal example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-graphics-escape-code">The graphics escape code</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="#transferring-pixel-data">Transferring pixel data</a><input class="toctree-checkbox" id="toctree-checkbox-89" name="toctree-checkbox-89" role="switch" type="checkbox"/><label for="toctree-checkbox-89"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="#rgb-and-rgba-data">RGB and RGBA data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#png-data">PNG data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compression">Compression</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="#the-transmission-medium">The transmission medium</a><input class="toctree-checkbox" id="toctree-checkbox-90" name="toctree-checkbox-90" role="switch" type="checkbox"/><label for="toctree-checkbox-90"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="#local-client">Local client</a></li>
<li class="toctree-l5"><a class="reference internal" href="#remote-client">Remote client</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#querying-support-and-available-transmission-mediums">Querying support and available transmission mediums</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="#display-images-on-screen">Display images on screen</a><input class="toctree-checkbox" id="toctree-checkbox-91" name="toctree-checkbox-91" role="switch" type="checkbox"/><label for="toctree-checkbox-91"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="#controlling-displayed-image-layout">Controlling displayed image layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unicode-placeholders">Unicode placeholders</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deleting-images">Deleting images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#suppressing-responses-from-the-terminal">Suppressing responses from the terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requesting-image-ids-from-the-terminal">Requesting image ids from the terminal</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="#animation">Animation</a><input class="toctree-checkbox" id="toctree-checkbox-92" name="toctree-checkbox-92" role="switch" type="checkbox"/><label for="toctree-checkbox-92"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="#transferring-animation-frame-data">Transferring animation frame data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#controlling-animations">Controlling animations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#composing-animation-frames">Composing animation frames</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#image-persistence-and-storage-quotas">Image persistence and storage quotas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#control-data-reference">Control data reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interaction-with-other-terminal-actions">Interaction with other terminal actions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="keyboard-protocol.html">Comprehensive keyboard handling in terminals</a><input class="toctree-checkbox" id="toctree-checkbox-93" name="toctree-checkbox-93" role="switch" type="checkbox"/><label for="toctree-checkbox-93"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="keyboard-protocol.html#quickstart">Quickstart</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="keyboard-protocol.html#an-overview">An overview</a><input class="toctree-checkbox" id="toctree-checkbox-94" name="toctree-checkbox-94" role="switch" type="checkbox"/><label for="toctree-checkbox-94"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#key-codes">Key codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#modifiers">Modifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#event-types">Event types</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#text-as-code-points">Text as code points</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#non-unicode-keys">Non-Unicode keys</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="keyboard-protocol.html#progressive-enhancement">Progressive enhancement</a><input class="toctree-checkbox" id="toctree-checkbox-95" name="toctree-checkbox-95" role="switch" type="checkbox"/><label for="toctree-checkbox-95"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#disambiguate-escape-codes">Disambiguate escape codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#report-event-types">Report event types</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#report-alternate-keys">Report alternate keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#report-all-keys-as-escape-codes">Report all keys as escape codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#report-associated-text">Report associated text</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="keyboard-protocol.html#detection-of-support-for-this-protocol">Detection of support for this protocol</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="keyboard-protocol.html#legacy-key-event-encoding">Legacy key event encoding</a><input class="toctree-checkbox" id="toctree-checkbox-96" name="toctree-checkbox-96" role="switch" type="checkbox"/><label for="toctree-checkbox-96"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#legacy-functional-keys">Legacy functional keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="keyboard-protocol.html#legacy-text-keys">Legacy text keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="keyboard-protocol.html#functional-key-definitions">Functional key definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="keyboard-protocol.html#legacy-ctrl-mapping-of-ascii-keys">Legacy <kbd class="kbd docutils literal notranslate">ctrl</kbd> mapping of ASCII keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="keyboard-protocol.html#bugs-in-fixterms">Bugs in fixterms</a></li>
<li class="toctree-l3"><a class="reference internal" href="keyboard-protocol.html#why-xterm-s-modifyotherkeys-should-not-be-used">Why xterm's modifyOtherKeys should not be used</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="file-transfer-protocol.html">File transfer over the TTY</a><input class="toctree-checkbox" id="toctree-checkbox-97" name="toctree-checkbox-97" role="switch" type="checkbox"/><label for="toctree-checkbox-97"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="file-transfer-protocol.html#overall-design">Overall design</a><input class="toctree-checkbox" id="toctree-checkbox-98" name="toctree-checkbox-98" role="switch" type="checkbox"/><label for="toctree-checkbox-98"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="file-transfer-protocol.html#sending-files-to-the-computer-running-the-terminal-emulator">Sending files to the computer running the terminal emulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="file-transfer-protocol.html#receiving-files-from-the-computer-running-terminal-emulator">Receiving files from the computer running terminal emulator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="file-transfer-protocol.html#canceling-a-session">Canceling a session</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-transfer-protocol.html#quieting-responses-from-the-terminal">Quieting responses from the terminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-transfer-protocol.html#file-metadata">File metadata</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="file-transfer-protocol.html#symbolic-and-hard-links">Symbolic and hard links</a><input class="toctree-checkbox" id="toctree-checkbox-99" name="toctree-checkbox-99" role="switch" type="checkbox"/><label for="toctree-checkbox-99"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="file-transfer-protocol.html#sending-links-to-the-terminal-emulator">Sending links to the terminal emulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="file-transfer-protocol.html#receiving-links-from-the-terminal-emulator">Receiving links from the terminal emulator</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="file-transfer-protocol.html#transmitting-binary-deltas">Transmitting binary deltas</a><input class="toctree-checkbox" id="toctree-checkbox-100" name="toctree-checkbox-100" role="switch" type="checkbox"/><label for="toctree-checkbox-100"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="file-transfer-protocol.html#sending-to-the-terminal-emulator">Sending to the terminal emulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="file-transfer-protocol.html#receiving-from-the-terminal-emulator">Receiving from the terminal emulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="file-transfer-protocol.html#the-format-of-signatures-and-deltas">The format of signatures and deltas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="file-transfer-protocol.html#compression">Compression</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-transfer-protocol.html#bypassing-explicit-user-authorization">Bypassing explicit user authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="file-transfer-protocol.html#encoding-of-transfer-commands-as-escape-codes">Encoding of transfer commands as escape codes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="desktop-notifications.html">Desktop notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="unscroll.html">Unscrolling the screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="color-stack.html">Saving and restoring colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="deccara.html">Setting text styles/colors in arbitrary regions of the screen</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="clipboard.html">Copying all data types to the clipboard</a><input class="toctree-checkbox" id="toctree-checkbox-101" name="toctree-checkbox-101" role="switch" type="checkbox"/><label for="toctree-checkbox-101"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="clipboard.html#reading-data-from-the-system-clipboard">Reading data from the system clipboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="clipboard.html#writing-data-to-the-system-clipboard">Writing data to the system clipboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="clipboard.html#support-for-terminal-multiplexers">Support for terminal multiplexers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="press-mentions.html">Press mentions of kitty</a><input class="toctree-checkbox" id="toctree-checkbox-102" name="toctree-checkbox-102" role="switch" type="checkbox"/><label for="toctree-checkbox-102"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="press-mentions.html#video-reviews">Video reviews</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="terminal-graphics-protocol">
<h1>Terminal graphics protocol<a class="headerlink" href="#terminal-graphics-protocol" title="Permalink to this heading">#</a></h1>
<p>The goal of this specification is to create a flexible and performant protocol
that allows the program running in the terminal, hereafter called the <em>client</em>,
to render arbitrary pixel (raster) graphics to the screen of the terminal
emulator. The major design goals are:</p>
<ul class="simple">
<li><p>Should not require terminal emulators to understand image formats.</p></li>
<li><p>Should allow specifying graphics to be drawn at individual pixel positions.</p></li>
<li><p>The graphics should integrate with the text, in particular it should be possible to draw graphics
below as well as above the text, with alpha blending. The graphics should also scroll with the text, automatically.</p></li>
<li><p>Should use optimizations when the client is running on the same computer as the terminal emulator.</p></li>
</ul>
<p>For some discussion regarding the design choices, see <a class="reference external" href="https://github.com/kovidgoyal/kitty/issues/33">#33</a>.</p>
<p>To see a quick demo, inside a <em>kitty</em> terminal run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kitty</span> <span class="o">+</span><span class="n">kitten</span> <span class="n">icat</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">image</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<p>You can also see a screenshot with more sophisticated features such as
alpha-blending and text over graphics.</p>
<img alt="Demo of graphics rendering in kitty" class="align-center" src="https://user-images.githubusercontent.com/1308621/31647475-1188ab66-b326-11e7-8d26-24b937f1c3e8.png" />
<p>Some programs and libraries that use the kitty graphics protocol:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/dsanson/termpdf.py">termpdf.py</a> - a terminal PDF/DJVU/CBR viewer</p></li>
<li><p><a class="reference external" href="https://github.com/ranger/ranger">ranger</a> - a terminal file manager, with image previews</p></li>
<li><p><a class="reference internal" href="kittens/diff.html"><span class="doc">kitty-diff</span></a> - a side-by-side terminal diff program with support for images</p></li>
<li><p><a class="reference external" href="https://github.com/jesvedberg/tpix">tpix</a> - a statically compiled binary that can be used to display images and easily installed on remote servers without root access</p></li>
<li><p><a class="reference external" href="https://github.com/mpv-player/mpv/commit/874e28f4a41a916bb567a882063dd2589e9234e1">mpv</a> - A video player that can play videos in the terminal</p></li>
<li><p><a class="reference external" href="https://github.com/mirukana/pixcat">pixcat</a> - a third party CLI and python library that wraps the graphics protocol</p></li>
<li><p><a class="reference external" href="https://github.com/dylanaraps/neofetch">neofetch</a> - A command line system
information tool</p></li>
<li><p><a class="reference external" href="https://github.com/atanunq/viu">viu</a> - a terminal image viewer</p></li>
<li><p><a class="reference external" href="https://ctx.graphics/">ctx.graphics</a> - Library for drawing graphics</p></li>
<li><p><a class="reference external" href="https://github.com/hzeller/timg">timg</a> - a terminal image and video viewer</p></li>
<li><p><a class="reference external" href="https://github.com/dankamongmen/notcurses">notcurses</a> - C library for terminal graphics with bindings for C++, Rust and Python</p></li>
<li><p><a class="reference external" href="https://github.com/BourgeoisBear/rasterm">rasterm</a>  - Go library to display images in the terminal</p></li>
<li><p><a class="reference external" href="https://github.com/hpjansson/chafa">chafa</a>  - a terminal image viewer</p></li>
<li><p><a class="reference external" href="https://github.com/edluffy/hologram.nvim">hologram.nvim</a>  - view images inside nvim</p></li>
<li><p><a class="reference external" href="https://github.com/AnonymouX47/term-image">term-image</a>  - A Python library, CLI and TUI to display and browse images in the terminal</p></li>
<li><p><a class="reference external" href="https://github.com/michaeljclark/glkitty">glkitty</a> - C library to draw OpenGL shaders in the terminal with a glgears demo</p></li>
</ul>
<p>Other terminals that have implemented the graphics protocol:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/wez/wezterm/issues/986">WezTerm</a></p></li>
<li><p><a class="reference external" href="https://invent.kde.org/utilities/konsole/-/merge_requests/594">Konsole</a></p></li>
<li><p><a class="reference external" href="https://github.com/91861/wayst">wayst</a></p></li>
</ul>
<section id="getting-the-window-size">
<h2>Getting the window size<a class="headerlink" href="#getting-the-window-size" title="Permalink to this heading">#</a></h2>
<p>In order to know what size of images to display and how to position them, the
client must be able to get the window size in pixels and the number of cells
per row and column. This can be done by using the <code class="docutils literal notranslate"><span class="pre">TIOCGWINSZ</span></code> ioctl.  Some
code to demonstrate its use</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">C</label><div class="tab-content docutils container">
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/ioctl.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">winsize</span><span class="w"> </span><span class="n">sz</span><span class="p">;</span>
<span class="w">    </span><span class="n">ioctl</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">TIOCGWINSZ</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sz</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span>
<span class="w">        </span><span class="s">&quot;number of rows: %i, number of columns: %i, screen width: %i, screen height: %i</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">sz</span><span class="p">.</span><span class="n">ws_row</span><span class="p">,</span><span class="w"> </span><span class="n">sz</span><span class="p">.</span><span class="n">ws_col</span><span class="p">,</span><span class="w"> </span><span class="n">sz</span><span class="p">.</span><span class="n">ws_xpixel</span><span class="p">,</span><span class="w"> </span><span class="n">sz</span><span class="p">.</span><span class="n">ws_ypixel</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">array</span><span class="o">,</span> <span class="nn">fcntl</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">termios</span>
<span class="n">buf</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">fcntl</span><span class="o">.</span><span class="n">ioctl</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">termios</span><span class="o">.</span><span class="n">TIOCGWINSZ</span><span class="p">,</span> <span class="n">buf</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span>
    <span class="s1">&#39;number of rows: </span><span class="si">{}</span><span class="s1"> number of columns: </span><span class="si">{}</span><span class="s1">&#39;</span>
    <span class="s1">&#39;screen width: </span><span class="si">{}</span><span class="s1"> screen height: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">buf</span><span class="p">))</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--3" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--3">Go</label><div class="tab-content docutils container">
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="s">&quot;golang.org/x/sys/unix&quot;</span>
<span class="nx">fd</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">unix</span><span class="p">.</span><span class="nx">Open</span><span class="p">(</span><span class="nx">fd</span><span class="p">,</span><span class="w"> </span><span class="nx">unix</span><span class="p">.</span><span class="nx">O_NOCTTY</span><span class="o">|</span><span class="nx">unix</span><span class="p">.</span><span class="nx">O_CLOEXEC</span><span class="o">|</span><span class="nx">unix</span><span class="p">.</span><span class="nx">O_NDELAY</span><span class="o">|</span><span class="nx">unix</span><span class="p">.</span><span class="nx">O_RDWR</span><span class="p">,</span><span class="w"> </span><span class="mo">0666</span><span class="p">)</span>
<span class="nx">sz</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">unix</span><span class="p">.</span><span class="nx">IoctlGetWinsize</span><span class="p">(</span><span class="nx">fd</span><span class="p">,</span><span class="w"> </span><span class="nx">unix</span><span class="p">.</span><span class="nx">TIOCGWINSZ</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;rows: %v columns: %v width: %v height %v&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">sz</span><span class="p">.</span><span class="nx">Row</span><span class="p">,</span><span class="w"> </span><span class="nx">sz</span><span class="p">.</span><span class="nx">Col</span><span class="p">,</span><span class="w"> </span><span class="nx">sz</span><span class="p">.</span><span class="nx">Xpixel</span><span class="p">,</span><span class="w"> </span><span class="nx">sz</span><span class="p">.</span><span class="nx">Ypixel</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note that some terminals return <code class="docutils literal notranslate"><span class="pre">0</span></code> for the width and height values. Such
terminals should be modified to return the correct values.  Examples of
terminals that return correct values: <code class="docutils literal notranslate"><span class="pre">kitty,</span> <span class="pre">xterm</span></code></p>
<p>You can also use the <em>CSI t</em> escape code to get the screen size. Send
<code class="docutils literal notranslate"><span class="pre">&lt;ESC&gt;[14t</span></code> to <code class="docutils literal notranslate"><span class="pre">STDOUT</span></code> and kitty will reply on <code class="docutils literal notranslate"><span class="pre">STDIN</span></code> with
<code class="docutils literal notranslate"><span class="pre">&lt;ESC&gt;[4;&lt;height&gt;;&lt;width&gt;t</span></code> where <code class="docutils literal notranslate"><span class="pre">height</span></code> and <code class="docutils literal notranslate"><span class="pre">width</span></code> are the window
size in pixels. This escape code is supported in many terminals, not just
kitty.</p>
</section>
<section id="a-minimal-example">
<h2>A minimal example<a class="headerlink" href="#a-minimal-example" title="Permalink to this heading">#</a></h2>
<p>Some minimal code to display PNG images in kitty, using the most basic
features of the graphics protocol:</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">Bash</label><div class="tab-content docutils container">
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
transmit_png<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">data</span><span class="o">=</span><span class="k">$(</span>base64<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="k">)</span>
<span class="w">    </span><span class="nv">data</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">data</span><span class="p">//[[:</span><span class="nv">space</span><span class="p">:]]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">builtin</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="nv">pos</span><span class="o">=</span><span class="m">0</span>
<span class="w">    </span><span class="nb">builtin</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="nv">chunk_size</span><span class="o">=</span><span class="m">4096</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$pos</span><span class="w"> </span>-lt<span class="w"> </span><span class="si">${#</span><span class="nv">data</span><span class="si">}</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="nb">builtin</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e_G&quot;</span>
<span class="w">        </span><span class="o">[</span><span class="w"> </span><span class="nv">$pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;a=T,f=100,&quot;</span>
<span class="w">        </span><span class="nb">builtin</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="nv">chunk</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">data</span><span class="p">:</span><span class="nv">$pos</span><span class="p">:</span><span class="nv">$chunk_size</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="nv">pos</span><span class="o">=</span><span class="k">$((</span><span class="nv">$pos</span><span class="o">+</span><span class="nv">$chunk_size</span><span class="k">))</span>
<span class="w">        </span><span class="o">[</span><span class="w"> </span><span class="nv">$pos</span><span class="w"> </span>-lt<span class="w"> </span><span class="si">${#</span><span class="nv">data</span><span class="si">}</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">builtin</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;m=1&quot;</span>
<span class="w">        </span><span class="o">[</span><span class="w"> </span><span class="si">${#</span><span class="nv">chunk</span><span class="si">}</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">builtin</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;;%s&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">chunk</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="nb">builtin</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e\\&quot;</span>
<span class="w">    </span><span class="k">done</span>
<span class="o">}</span>

transmit_png<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Python</label><div class="tab-content docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">standard_b64encode</span>

<span class="k">def</span> <span class="nf">serialize_gr_command</span><span class="p">(</span><span class="o">**</span><span class="n">cmd</span><span class="p">):</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;payload&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">cmd</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
    <span class="n">ans</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">ans</span><span class="o">.</span><span class="n">append</span>
    <span class="n">w</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\033</span><span class="s1">_G&#39;</span><span class="p">),</span> <span class="n">w</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">payload</span><span class="p">:</span>
        <span class="n">w</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
        <span class="n">w</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
    <span class="n">w</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\033\\</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">write_chunked</span><span class="p">(</span><span class="o">**</span><span class="n">cmd</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">standard_b64encode</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">))</span>
    <span class="k">while</span> <span class="n">data</span><span class="p">:</span>
        <span class="n">chunk</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="mi">4096</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">4096</span><span class="p">:]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">data</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">buffer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">serialize_gr_command</span><span class="p">(</span><span class="n">payload</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span>
                                                    <span class="o">**</span><span class="n">cmd</span><span class="p">))</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="n">cmd</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">write_chunked</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<p>Save this script as <code class="file docutils literal notranslate"><span class="pre">send-png</span></code>, then you can use it to display any PNG
file in kitty as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">send</span><span class="o">-</span><span class="n">png</span>
<span class="o">./</span><span class="n">send</span><span class="o">-</span><span class="n">png</span> <span class="n">file</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
</section>
<section id="the-graphics-escape-code">
<h2>The graphics escape code<a class="headerlink" href="#the-graphics-escape-code" title="Permalink to this heading">#</a></h2>
<p>All graphics escape codes are of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_G</span><span class="o">&lt;</span><span class="n">control</span> <span class="n">data</span><span class="o">&gt;</span><span class="p">;</span><span class="o">&lt;</span><span class="n">payload</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>This is a so-called <em>Application Programming Command (APC)</em>. Most terminal
emulators ignore APC codes, making it safe to use.</p>
<p>The control data is a comma-separated list of <code class="docutils literal notranslate"><span class="pre">key=value</span></code> pairs.  The payload
is arbitrary binary data, base64-encoded to prevent interoperation problems
with legacy terminals that get confused by control codes within an APC code.
The meaning of the payload is interpreted based on the control data.</p>
<p>The first step is to transmit the actual image data.</p>
</section>
<section id="transferring-pixel-data">
<span id="id1"></span><h2>Transferring pixel data<a class="headerlink" href="#transferring-pixel-data" title="Permalink to this heading">#</a></h2>
<p>The first consideration when transferring data between the client and the
terminal emulator is the format in which to do so. Since there is a vast and
growing number of image formats in existence, it does not make sense to have
every terminal emulator implement support for them. Instead, the client should
send simple pixel data to the terminal emulator. The obvious downside to this
is performance, especially when the client is running on a remote machine.
Techniques for remedying this limitation are discussed later. The terminal
emulator must understand pixel data in three formats, 24-bit RGB, 32-bit RGBA and
PNG. This is specified using the <code class="docutils literal notranslate"><span class="pre">f</span></code> key in the control data. <code class="docutils literal notranslate"><span class="pre">f=32</span></code> (which is the
default) indicates 32-bit RGBA data and <code class="docutils literal notranslate"><span class="pre">f=24</span></code> indicates 24-bit RGB data and <code class="docutils literal notranslate"><span class="pre">f=100</span></code>
indicates PNG data. The PNG format is supported for convenience and a compact way
of transmitting paletted images.</p>
<section id="rgb-and-rgba-data">
<h3>RGB and RGBA data<a class="headerlink" href="#rgb-and-rgba-data" title="Permalink to this heading">#</a></h3>
<p>In these formats the pixel data is stored directly as 3 or 4 bytes per pixel,
respectively. The colors in the data <strong>must</strong> be in the <em>sRGB color space</em>.  When
specifying images in this format, the image dimensions <strong>must</strong> be sent in the
control data. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gf</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">20</span><span class="p">;</span><span class="o">&lt;</span><span class="n">payload</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>Here the width and height are specified using the <code class="docutils literal notranslate"><span class="pre">s</span></code> and <code class="docutils literal notranslate"><span class="pre">v</span></code> keys respectively. Since
<code class="docutils literal notranslate"><span class="pre">f=24</span></code> there are three bytes per pixel and therefore the pixel data must be <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">*</span> <span class="pre">10</span> <span class="pre">*</span> <span class="pre">20</span> <span class="pre">=</span> <span class="pre">600</span></code>
bytes.</p>
</section>
<section id="png-data">
<h3>PNG data<a class="headerlink" href="#png-data" title="Permalink to this heading">#</a></h3>
<p>In this format any PNG image can be transmitted directly.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gf</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span><span class="o">&lt;</span><span class="n">payload</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>The PNG format is specified using the <code class="docutils literal notranslate"><span class="pre">f=100</span></code> key. The width and height of
the image will be read from the PNG data itself. Note that if you use both PNG and
compression, then you must provide the <code class="docutils literal notranslate"><span class="pre">S</span></code> key with the size of the PNG data.</p>
</section>
<section id="compression">
<h3>Compression<a class="headerlink" href="#compression" title="Permalink to this heading">#</a></h3>
<p>The client can send compressed image data to the terminal emulator, by
specifying the <code class="docutils literal notranslate"><span class="pre">o</span></code> key. Currently, only <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc1950.html"><strong>RFC 1950</strong></a> ZLIB based deflate
compression is supported, which is specified using <code class="docutils literal notranslate"><span class="pre">o=z</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gf</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">o</span><span class="o">=</span><span class="n">z</span><span class="p">;</span><span class="o">&lt;</span><span class="n">payload</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>This is the same as the example from the RGB data section, except that the
payload is now compressed using deflate (this occurs prior to base64-encoding).
The terminal emulator will decompress it before rendering. You can specify
compression for any format. The terminal emulator will decompress before
interpreting the pixel data.</p>
</section>
<section id="the-transmission-medium">
<h3>The transmission medium<a class="headerlink" href="#the-transmission-medium" title="Permalink to this heading">#</a></h3>
<p>The transmission medium is specified using the <code class="docutils literal notranslate"><span class="pre">t</span></code> key. The <code class="docutils literal notranslate"><span class="pre">t</span></code> key defaults to <code class="docutils literal notranslate"><span class="pre">d</span></code>
and can take the values:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Value of <cite>t</cite></p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d</span></code></p></td>
<td><p>Direct (the data is transmitted within the escape code itself)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">f</span></code></p></td>
<td><p>A simple file (regular files only, not named pipes or similar)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">t</span></code></p></td>
<td><p>A temporary file, the terminal emulator will delete the file after reading the pixel data. For security reasons
the terminal emulator should only delete the file if it
is in a known temporary directory, such as <code class="file docutils literal notranslate"><span class="pre">/tmp</span></code>,
<code class="file docutils literal notranslate"><span class="pre">/dev/shm</span></code>, <code class="file docutils literal notranslate"><span class="pre">TMPDIR</span> <span class="pre">env</span> <span class="pre">var</span> <span class="pre">if</span> <span class="pre">present</span></code> and any platform
specific temporary directories and the file has the
string <code class="code docutils literal notranslate"><span class="pre">tty-graphics-protocol</span></code> in its full file path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p>A <em>shared memory object</em>, which on POSIX systems is a
<a class="reference external" href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/shm_open.html">POSIX shared memory object</a>
and on Windows is a
<a class="reference external" href="https://docs.microsoft.com/en-us/windows/win32/memory/creating-named-shared-memory">Named shared memory object</a>.
The terminal emulator must read the data from the memory
object and then unlink and close it on POSIX and just
close it on Windows.</p></td>
</tr>
</tbody>
</table>
</div>
<p>When opening files, the terminal emulator must follow symlinks. In case of
symlink loops or too many symlinks, it should fail and respond with an error,
similar to reporting any other kind of I/O error.</p>
<section id="local-client">
<h4>Local client<a class="headerlink" href="#local-client" title="Permalink to this heading">#</a></h4>
<p>First let us consider the local client techniques (files and shared memory). Some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gf</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">f</span><span class="p">;</span><span class="o">&lt;</span><span class="n">encoded</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">png</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>Here we tell the terminal emulator to read PNG data from the specified file of
the specified size:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">s</span><span class="p">,</span><span class="n">o</span><span class="o">=</span><span class="n">z</span><span class="p">;</span><span class="o">&lt;</span><span class="n">encoded</span> <span class="o">/</span><span class="n">some</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">memory</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>Here we tell the terminal emulator to read compressed image data from
the specified shared memory object.</p>
<p>The client can also specify a size and offset to tell the terminal emulator
to only read a part of the specified file. The is done using the <code class="docutils literal notranslate"><span class="pre">S</span></code> and <code class="docutils literal notranslate"><span class="pre">O</span></code>
keys respectively. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">s</span><span class="p">,</span><span class="n">S</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span><span class="n">O</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span><span class="o">&lt;</span><span class="n">encoded</span> <span class="o">/</span><span class="n">some</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">memory</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>This tells the terminal emulator to read <code class="docutils literal notranslate"><span class="pre">80</span></code> bytes starting from the offset <code class="docutils literal notranslate"><span class="pre">10</span></code>
inside the specified shared memory buffer.</p>
</section>
<section id="remote-client">
<h4>Remote client<a class="headerlink" href="#remote-client" title="Permalink to this heading">#</a></h4>
<p>Remote clients, those that are unable to use the filesystem/shared memory to
transmit data, must send the pixel data directly using escape codes. Since
escape codes are of limited maximum length, the data will need to be chunked up
for transfer. This is done using the <code class="docutils literal notranslate"><span class="pre">m</span></code> key. The pixel data must first be
base64 encoded then chunked up into chunks no larger than <code class="docutils literal notranslate"><span class="pre">4096</span></code> bytes. The client
then sends the graphics escape code as usual, with the addition of an <code class="docutils literal notranslate"><span class="pre">m</span></code> key that
must have the value <code class="docutils literal notranslate"><span class="pre">1</span></code> for all but the last chunk, where it must be <code class="docutils literal notranslate"><span class="pre">0</span></code>. For example,
if the data is split into three chunks, the client would send the following
sequence of escape codes to the terminal emulator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gs</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="o">&lt;</span><span class="n">encoded</span> <span class="n">pixel</span> <span class="n">data</span> <span class="n">first</span> <span class="n">chunk</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
<span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gm</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="o">&lt;</span><span class="n">encoded</span> <span class="n">pixel</span> <span class="n">data</span> <span class="n">second</span> <span class="n">chunk</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
<span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gm</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="o">&lt;</span><span class="n">encoded</span> <span class="n">pixel</span> <span class="n">data</span> <span class="n">last</span> <span class="n">chunk</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>Note that only the first escape code needs to have the full set of control
codes such as width, height, format, etc. Subsequent chunks <strong>must</strong> have only
the <code class="docutils literal notranslate"><span class="pre">m</span></code> and optionally <code class="docutils literal notranslate"><span class="pre">q</span></code> keys. When sending animation frame data, subsequent
chunks <strong>must</strong> also specify the <code class="docutils literal notranslate"><span class="pre">a=f</span></code> key. The client <strong>must</strong> finish sending
all chunks for a single image before sending any other graphics related escape
codes. Note that the cursor position used to display the image <strong>must</strong> be the
position when the final chunk is received. Finally, terminals must not display
anything, until the entire sequence is received and validated.</p>
</section>
</section>
<section id="querying-support-and-available-transmission-mediums">
<h3>Querying support and available transmission mediums<a class="headerlink" href="#querying-support-and-available-transmission-mediums" title="Permalink to this heading">#</a></h3>
<p>Since a client has no a-priori knowledge of whether it shares a filesystem/shared memory
with the terminal emulator, it can send an id with the control data, using the <code class="docutils literal notranslate"><span class="pre">i</span></code> key
(which can be an arbitrary positive integer up to 4294967295, it must not be zero).
If it does so, the terminal emulator will reply after trying to load the image, saying
whether loading was successful or not. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=</span><span class="mi">31</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">s</span><span class="p">;</span><span class="o">&lt;</span><span class="n">encoded</span> <span class="o">/</span><span class="n">some</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">memory</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>to which the terminal emulator will reply (after trying to load the data):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=</span><span class="mi">31</span><span class="p">;</span><span class="n">error</span> <span class="n">message</span> <span class="ow">or</span> <span class="n">OK</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">i</span></code> value will be the same as was sent by the client in the original
request.  The message data will be a ASCII encoded string containing only
printable characters and spaces. The string will be <code class="docutils literal notranslate"><span class="pre">OK</span></code> if reading the pixel
data succeeded or an error message.</p>
<p>Sometimes, using an id is not appropriate, for example, if you do not want to
replace a previously sent image with the same id, or if you are sending a dummy
image and do not want it stored by the terminal emulator. In that case, you can
use the <em>query action</em>, set <code class="docutils literal notranslate"><span class="pre">a=q</span></code>. Then the terminal emulator will try to load
the image and respond with either OK or an error, as above, but it will not
replace an existing image with the same id, nor will it store the image.</p>
<p>As of April 2022, kitty and WezTerm are the only terminal emulators to
support this graphics protocol completely, with Konsole and wayst having partial support.
We intend that any terminal emulator that wishes to support it can do so. To
check if a terminal emulator supports the graphics protocol the best way is to
send the above <em>query action</em> followed by a request for the <a class="reference external" href="https://vt100.net/docs/vt510-rm/DA1.html">primary device
attributes</a>. If you get back an
answer for the device attributes without getting back an answer for the <em>query
action</em> the terminal emulator does not support the graphics protocol.</p>
<p>This means that terminal emulators that support the graphics protocol, <strong>must</strong>
reply to <em>query actions</em> immediately without processing other input. Most
terminal emulators handle input in a FIFO manner, anyway.</p>
<p>So for example, you could send:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=</span><span class="mi">31</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">q</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">f</span><span class="o">=</span><span class="mi">24</span><span class="p">;</span><span class="n">AAAA</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\<span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="p">[</span><span class="n">c</span>
</pre></div>
</div>
<p>If you get back a response to the graphics query, the terminal emulator supports
the protocol, if you get back a response to the device attributes query without
a response to the graphics query, it does not.</p>
</section>
</section>
<section id="display-images-on-screen">
<h2>Display images on screen<a class="headerlink" href="#display-images-on-screen" title="Permalink to this heading">#</a></h2>
<p>Every transmitted image can be displayed an arbitrary number of times on the
screen, in different locations, using different parts of the source image, as
needed. Each such display of an image is called a <em>placement</em>.  You can either
simultaneously transmit and display an image using the action <code class="docutils literal notranslate"><span class="pre">a=T</span></code>, or first
transmit the image with a id, such as <code class="docutils literal notranslate"><span class="pre">i=10</span></code> and then display it with
<code class="docutils literal notranslate"><span class="pre">a=p,i=10</span></code> which will display the previously transmitted image at the current
cursor position. When specifying an image id, the terminal emulator will reply
to the placement request with an acknowledgement code, which will be either:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">;</span><span class="n">OK</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>when the image referred to by id was found, or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">;</span><span class="n">ENOENT</span><span class="p">:</span><span class="o">&lt;</span><span class="n">some</span> <span class="n">detailed</span> <span class="n">error</span> <span class="n">msg</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>when the image with the specified id was not found. This is similar to the
scheme described above for querying available transmission media, except that
here we are querying if the image with the specified id is available or needs to
be re-transmitted.</p>
<p>Since there can be many placements per image, you can also give placements an
id. To do so add the <code class="docutils literal notranslate"><span class="pre">p</span></code> key with a number between <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">4294967295</span></code>.
When you specify a placement id, it will be added to the acknowledgement code
above. Every placement is uniquely identified by the pair of the <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">id</span></code>
and the <code class="docutils literal notranslate"><span class="pre">placement</span> <span class="pre">id</span></code>. If you specify a placement id for an image that does
not have an id (i.e. has id=0), it will be ignored. In particular this means
there can exist multiple images with <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">id=0,</span> <span class="pre">placement</span> <span class="pre">id=0</span></code>.
An example response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=&lt;</span><span class="n">image</span> <span class="nb">id</span><span class="o">&gt;</span><span class="p">,</span><span class="n">p</span><span class="o">=&lt;</span><span class="n">placement</span> <span class="nb">id</span><span class="o">&gt;</span><span class="p">;</span><span class="n">OK</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>If you send two placements with the same <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">placement</span> <span class="pre">id</span></code> the
second one will replace the first. This can be used to resize or move
placements around the screen, without flicker.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.19.3: </span>Support for specifying placement ids (see <a class="reference internal" href="kittens/query_terminal.html"><span class="doc">Query terminal</span></a> to query kitty version)</p>
</div>
<section id="controlling-displayed-image-layout">
<h3>Controlling displayed image layout<a class="headerlink" href="#controlling-displayed-image-layout" title="Permalink to this heading">#</a></h3>
<p>The image is rendered at the current cursor position, from the upper left corner of
the current cell. You can also specify extra <code class="docutils literal notranslate"><span class="pre">X=3</span></code> and <code class="docutils literal notranslate"><span class="pre">Y=4</span></code> pixel offsets to display from
a different origin within the cell. Note that the offsets must be smaller that the size of the cell.</p>
<p>By default, the entire image will be displayed (images wider than the available
width will be truncated on the right edge). You can choose a source rectangle (in pixels)
as the part of the image to display. This is done with the keys: <code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">y,</span> <span class="pre">w,</span> <span class="pre">h</span></code> which specify
the top-left corner, width and height of the source rectangle.</p>
<p>You can also ask the terminal emulator to display the image in a specified rectangle
(num of columns / num of lines), using the control codes <code class="docutils literal notranslate"><span class="pre">c,r</span></code>. <code class="docutils literal notranslate"><span class="pre">c</span></code> is the number of columns
and <cite>r</cite> the number of rows. The image will be scaled (enlarged/shrunk) as needed to fit
the specified area. Note that if you specify a start cell offset via the <code class="docutils literal notranslate"><span class="pre">X,Y</span></code> keys, it is not
added to the number of rows/columns.</p>
<p>Finally, you can specify the image <em>z-index</em>, i.e. the vertical stacking order. Images
placed in the same location with different z-index values will be blended if
they are semi-transparent. You can specify z-index values using the <code class="docutils literal notranslate"><span class="pre">z</span></code> key.
Negative z-index values mean that the images will be drawn under the text. This
allows rendering of text on top of images. Negative z-index values below
INT32_MIN/2 (-1,073,741,824) will be drawn under cells with non-default background
colors. If two images with the same z-index overlap then the image with the
lower id is considered to have the lower z-index. If the images have the same
z-index and the same id, then the behavior is undefined.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After placing an image on the screen the cursor must be moved to the
right by the number of cols in the image placement rectangle and down by the
number of rows in the image placement rectangle. If either of these cause
the cursor to leave either the screen or the scroll area, the exact
positioning of the cursor is undefined, and up to implementations.
The client can ask the terminal emulator to not move the cursor at all
by specifying <code class="docutils literal notranslate"><span class="pre">C=1</span></code> in the command, which sets the cursor movement policy
to no movement for placing the current image.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.20.0: </span>Support for the C=1 cursor movement policy</p>
</div>
</section>
<section id="unicode-placeholders">
<span id="graphics-unicode-placeholders"></span><h3>Unicode placeholders<a class="headerlink" href="#unicode-placeholders" title="Permalink to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.28.0: </span>Support for image display via Unicode placeholders</p>
</div>
<p>You can also use a special Unicode character <code class="docutils literal notranslate"><span class="pre">U+10EEEE</span></code> as a placeholder for
an image. This approach is less flexible, but it allows using images inside
any host application that supports Unicode and foreground colors (tmux, vim, weechat, etc.)
and has a way to pass escape codes through to the underlying terminal.</p>
<p>The central idea is that we use a single <em>Private Use</em> Unicode character as a
<em>placeholder</em> to indicate to the terminal that an image is supposed to be
displayed at that cell. Since this character is just normal text, Unicode aware
application will move it around as needed when they redraw their screens,
thereby automatically moving the displayed image as well, even though they know
nothing about the graphics protocol. So an image is first created using the
normal graphics protocol escape codes (albeit in quiet mode (<code class="docutils literal notranslate"><span class="pre">q=2</span></code>) so that there are
no responses from the terminal that could confuse the host application). Then,
the actual image is displayed by getting the host application to emit normal
text consisting of <code class="docutils literal notranslate"><span class="pre">U+10EEEE</span></code> and various diacritics (Unicode combining
characters) and colors.</p>
<p>To use it, first create an image as you would normally with the graphics
protocol with (<code class="docutils literal notranslate"><span class="pre">q=2</span></code>), but do not create a placement for it, that is, do not
display it. Then, create a <em>virtual image placement</em> by specifying <code class="docutils literal notranslate"><span class="pre">U=1</span></code> and
the desired number of lines and columns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">U</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="o">=&lt;</span><span class="n">image_id</span><span class="o">&gt;</span><span class="p">,</span><span class="n">c</span><span class="o">=&lt;</span><span class="n">columns</span><span class="o">&gt;</span><span class="p">,</span><span class="n">r</span><span class="o">=&lt;</span><span class="n">rows</span><span class="o">&gt;&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>The creation of the placement need not be a separate escape code, it can be
combined with <code class="docutils literal notranslate"><span class="pre">a=T</span></code> to both transmit and create the virtual placement with a
single code.</p>
<p>The image will eventually be fit to the specified rectangle, its aspect ratio
preserved. Finally, the image can be actually displayed by using the
placeholder character, encoding the image ID in its foreground color. The row
and column values are specified with diacritics listed in
<a class="reference download internal" download="" href="_downloads/1792bad15b12979994cd6ecc54c967a6/rowcolumn-diacritics.txt"><code class="xref download docutils literal notranslate"><span class="pre">rowcolumn-diacritics.txt</span></code></a>.  For
example, here is how you can print a <code class="docutils literal notranslate"><span class="pre">2x2</span></code> placeholder for image ID <code class="docutils literal notranslate"><span class="pre">42</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e[38;5;42m\U10EEEE\U0305\U0305\U10EEEE\U0305\U030D\e[39m\n&quot;</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e[38;5;42m\U10EEEE\U030D\U0305\U10EEEE\U030D\U030D\e[39m\n&quot;</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">U+305</span></code> is the diacritic corresponding to the number <code class="docutils literal notranslate"><span class="pre">0</span></code>
and <code class="docutils literal notranslate"><span class="pre">U+30D</span></code> corresponds to <code class="docutils literal notranslate"><span class="pre">1</span></code>. So these two commands create the following
<code class="docutils literal notranslate"><span class="pre">2x2</span></code> placeholder:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>(0, 0)</p></td>
<td><p>(1, 0)</p></td>
</tr>
<tr class="row-even"><td><p>(1, 0)</p></td>
<td><p>(1, 1)</p></td>
</tr>
</tbody>
</table>
</div>
<p>This will cause the image with ID <code class="docutils literal notranslate"><span class="pre">42</span></code> to be displayed in a <code class="docutils literal notranslate"><span class="pre">2x2</span></code> grid.
Ideally, you would print out as many cells as the number of rows and columns
specified when creating the virtual placement, but in case of a mismatch only
part of the image will be displayed.</p>
<p>By using only the foreground color for image ID you are limited to either 8-bit IDs in 256 color
mode or 24-bit IDs in true color mode. Since IDs are in a global namespace
there can easily be collisions. If you need more bits for the image
ID, you can specify the most significant byte via a third diacritic. For
example, this is the placeholder for the image ID <code class="docutils literal notranslate"><span class="pre">33554474</span> <span class="pre">=</span> <span class="pre">42</span> <span class="pre">+</span> <span class="pre">(2</span> <span class="pre">&lt;&lt;</span> <span class="pre">24)</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e[38;5;42m\U10EEEE\U0305\U0305\U030E\U10EEEE\U0305\U030D\U030E\n&quot;</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e[38;5;42m\U10EEEE\U030D\U0305\U030E\U10EEEE\U030D\U030D\U030E\n&quot;</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">U+30E</span></code> is the diacritic corresponding to the number <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<p>You can also specify a placement ID using the underline color (if it's omitted
or zero, the terminal may choose any virtual placement of the given image). The
background color is interpreted as the background color, visible if the image is
transparent. Other text attributes are reserved for future use.</p>
<p>Row, column and most significant byte diacritics may also be omitted, in which
case the placeholder cell will inherit the missing values from the placeholder
cell to the left, following the algorithm:</p>
<ul class="simple">
<li><p>If no diacritics are present, and the previous placeholder cell has the same
foreground and underline colors, then the row of the current cell will be the
row of the cell to the left, the column will be the column of the cell to the
left plus one, and the most significant image ID byte will be the most
significant image ID byte of the cell to the left.</p></li>
<li><p>If only the row diacritic is present, and the previous placeholder cell has
the same row and the same foreground and underline colors, then the column of
the current cell will be the column of the cell to the left plus one, and the
most significant image ID byte will be the most significant image ID byte of
the cell to the left.</p></li>
<li><p>If only the row and column diacritics are present, and the previous
placeholder cell has the same row, the same foreground and underline colors,
and its column is one less than the current column, then the most significant
image ID byte of the current cell will be the most significant image ID byte
of the cell to the left.</p></li>
</ul>
<p>These rules are applied left-to-right, which allows specifying only row
diacritics of the first column, i.e. here is a 2 rows by 3 columns placeholder:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e[38;5;42m\U10EEEE\U0305\U10EEEE\U10EEEE\n&quot;</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;\e[38;5;42m\U10EEEE\U030D\U10EEEE\U10EEEE\n&quot;</span>
</pre></div>
</div>
<p>This will not work for horizontal scrolling and overlapping images since the two
given rules will fail to guess the missing information. In such cases, the
terminal may apply other heuristics (but it doesn't have to).</p>
<p>It is important to distinguish between virtual image placements and real images
displayed on top of Unicode placeholders. Virtual placements are invisible and only play
the role of prototypes for real images. Virtual placements can be deleted by a
deletion command only when the <cite>d</cite> key is equal to <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">I</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code> or <code class="docutils literal notranslate"><span class="pre">N</span></code>.
The key values <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, <code class="docutils literal notranslate"><span class="pre">p</span></code>, <code class="docutils literal notranslate"><span class="pre">q</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code> and their capital
variants never affect virtual placements because they do not have a physical
location on the screen.</p>
<p>Real images displayed on top of Unicode placeholders are not considered
placements from the protocol perspective. They cannot be manipulated using
graphics commands, instead they should be moved, deleted, or modified by
manipulating the underlying Unicode placeholder as normal text.</p>
</section>
</section>
<section id="deleting-images">
<h2>Deleting images<a class="headerlink" href="#deleting-images" title="Permalink to this heading">#</a></h2>
<p>Images can be deleted by using the delete action <code class="docutils literal notranslate"><span class="pre">a=d</span></code>. If specified without any
other keys, it will delete all images visible on screen. To delete specific images,
use the <cite>d</cite> key as described in the table below. Note that each value of d has
both a lowercase and an uppercase variant. The lowercase variant only deletes the
images without necessarily freeing up the stored image data, so that the images can be
re-displayed without needing to resend the data. The uppercase variants will delete
the image data as well, provided that the image is not referenced elsewhere, such as in the
scrollback buffer. The values of the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> keys are the same as cursor positions (i.e.
<code class="docutils literal notranslate"><span class="pre">x=1,</span> <span class="pre">y=1</span></code> is the top left cell).</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Value of <code class="docutils literal notranslate"><span class="pre">d</span></code></p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">a</span></code> or <code class="docutils literal notranslate"><span class="pre">A</span></code></p></td>
<td><p>Delete all placements visible on screen</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i</span></code> or <code class="docutils literal notranslate"><span class="pre">I</span></code></p></td>
<td><p>Delete all images with the specified id, specified using the <code class="docutils literal notranslate"><span class="pre">i</span></code> key. If you specify a <code class="docutils literal notranslate"><span class="pre">p</span></code> key for the placement                      id as well, then only the placement with the specified image id and placement id will be deleted.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code> or <code class="docutils literal notranslate"><span class="pre">N</span></code></p></td>
<td><p>Delete newest image with the specified number, specified using the <code class="docutils literal notranslate"><span class="pre">I</span></code> key. If you specify a <code class="docutils literal notranslate"><span class="pre">p</span></code> key for the
placement id as well, then only the placement with the specified number and placement id will be deleted.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">c</span></code> or <code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p>Delete all placements that intersect with the current cursor position.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">f</span></code> or <code class="docutils literal notranslate"><span class="pre">F</span></code></p></td>
<td><p>Delete animation frames.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">p</span></code> or <code class="docutils literal notranslate"><span class="pre">P</span></code></p></td>
<td><p>Delete all placements that intersect a specific cell, the cell is specified using the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> keys</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">q</span></code> or <code class="docutils literal notranslate"><span class="pre">Q</span></code></p></td>
<td><p>Delete all placements that intersect a specific cell having a specific z-index. The cell and z-index is specified using the <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> keys.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span></code> or <code class="docutils literal notranslate"><span class="pre">X</span></code></p></td>
<td><p>Delete all placements that intersect the specified column, specified using the <code class="docutils literal notranslate"><span class="pre">x</span></code> key.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y</span></code> or <code class="docutils literal notranslate"><span class="pre">Y</span></code></p></td>
<td><p>Delete all placements that intersect the specified row, specified using the <code class="docutils literal notranslate"><span class="pre">y</span></code> key.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">z</span></code> or <code class="docutils literal notranslate"><span class="pre">Z</span></code></p></td>
<td><p>Delete all placements that have the specified z-index, specified using the <code class="docutils literal notranslate"><span class="pre">z</span></code> key.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Note when all placements for an image have been deleted, the image is also
deleted, if the capital letter form above is specified. Also, when the terminal
is running out of quota space for new images, existing images without
placements will be preferentially deleted.</p>
<p>Some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">d</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\              <span class="c1"># delete all visible placements</span>
<span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">10</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\     <span class="c1"># delete the image with id=10, without freeing data</span>
<span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mi">7</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\ <span class="c1"># delete the image with id=10 and placement id=7, without freeing data</span>
<span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="n">Z</span><span class="p">,</span><span class="n">z</span><span class="o">=-</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\     <span class="c1"># delete the placements with z-index -1, also freeing up image data</span>
<span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="n">p</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\  <span class="c1"># delete all placements that intersect the cell at (3, 4), without freeing data</span>
</pre></div>
</div>
</section>
<section id="suppressing-responses-from-the-terminal">
<h2>Suppressing responses from the terminal<a class="headerlink" href="#suppressing-responses-from-the-terminal" title="Permalink to this heading">#</a></h2>
<p>If you are using the graphics protocol from a limited client, such as a shell
script, it might be useful to avoid having to process responses from the
terminal. For this, you can use the <code class="docutils literal notranslate"><span class="pre">q</span></code> key. Set it to <code class="docutils literal notranslate"><span class="pre">1</span></code> to suppress
<code class="docutils literal notranslate"><span class="pre">OK</span></code> responses and to <code class="docutils literal notranslate"><span class="pre">2</span></code> to suppress failure responses.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.19.3: </span>The ability to suppress responses (see <a class="reference internal" href="kittens/query_terminal.html"><span class="doc">Query terminal</span></a> to query kitty version)</p>
</div>
</section>
<section id="requesting-image-ids-from-the-terminal">
<h2>Requesting image ids from the terminal<a class="headerlink" href="#requesting-image-ids-from-the-terminal" title="Permalink to this heading">#</a></h2>
<p>If you are writing a program that is going to share the screen with other
programs and you still want to use image ids, it is not possible to know
what image ids are free to use. In this case, instead of using the <code class="docutils literal notranslate"><span class="pre">i</span></code>
key to specify an image id use the <code class="docutils literal notranslate"><span class="pre">I</span></code> key to specify an image number
instead. These numbers are not unique.
When creating a new image, even if an existing image has the same number a new
one is created. And the terminal will reply with the id of the newly created
image. For example, when creating an image with <code class="docutils literal notranslate"><span class="pre">I=13</span></code>, the terminal will
send the response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span><span class="n">I</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span><span class="n">OK</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>Here, the value of <code class="docutils literal notranslate"><span class="pre">i</span></code> is the id for the newly created image and the value of
<code class="docutils literal notranslate"><span class="pre">I</span></code> is the same as was sent in the creation command.</p>
<p>All future commands that refer to images using the image number, such as
creating placements or deleting images, will act on only the newest image with
that number. This allows the client program to send a bunch of commands dealing
with an image by image number without waiting for a response from the terminal
with the image id. Once such a response is received, the client program should
use the <code class="docutils literal notranslate"><span class="pre">i</span></code> key with the image id for all future communication.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Specifying both <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">I</span></code> keys in any command is an error. The
terminal must reply with an EINVAL error message, unless silenced.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.19.3: </span>The ability to use image numbers (see <a class="reference internal" href="kittens/query_terminal.html"><span class="doc">Query terminal</span></a> to query kitty version)</p>
</div>
</section>
<section id="animation">
<span id="animation-protocol"></span><h2>Animation<a class="headerlink" href="#animation" title="Permalink to this heading">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.20.0: </span>Animation support (see <a class="reference internal" href="kittens/query_terminal.html"><span class="doc">Query terminal</span></a> to query kitty version)</p>
</div>
<p>When designing support for animation, the two main considerations were:</p>
<ol class="arabic simple">
<li><p>There should be a way for both client and terminal driven animations.
Since there is unknown and variable latency between client and terminal,
especially over SSH, client driven animations are not sufficient.</p></li>
<li><p>Animations often consist of small changes from one frame to the next, the
protocol should thus allow transmitting these deltas for efficiency and
performance reasons.</p></li>
</ol>
<p>Animation support is added to the protocol by adding two new modes for the
<code class="docutils literal notranslate"><span class="pre">a</span></code> (action) key. A <code class="docutils literal notranslate"><span class="pre">f</span></code> mode for transmitting frame data and an <code class="docutils literal notranslate"><span class="pre">a</span></code> mode
for controlling the animation of an image. Animation proceeds in two steps,
first a normal image is created as described earlier. Then animation frames are
added to the image to make it into an animation. Since every animation is
associated with a single image, all animation escape codes must specify either
the <code class="docutils literal notranslate"><span class="pre">i</span></code> or <code class="docutils literal notranslate"><span class="pre">I</span></code> keys to identify the image being operated on.</p>
<section id="transferring-animation-frame-data">
<h3>Transferring animation frame data<a class="headerlink" href="#transferring-animation-frame-data" title="Permalink to this heading">#</a></h3>
<p>Transferring animation frame data is very similar to
<a class="reference internal" href="#transferring-pixel-data"><span class="std std-ref">Transferring pixel data</span></a> above. The main difference is that the image
the frame belongs to must be specified and it is possible to transmit data for
only part of a frame, declaring the rest of the frame to be filled in by data
from a previous frame, or left blank. To transfer frame data the <code class="docutils literal notranslate"><span class="pre">a=f</span></code>
key must be used in all escape codes.</p>
<p>First, to transfer a simple frame that has data for the full image area, the
escape codes used are exactly the same as for transferring image data, with the
addition of: <code class="docutils literal notranslate"><span class="pre">a=f,i=&lt;image</span> <span class="pre">id&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">a=f,I=&lt;image</span> <span class="pre">number&gt;</span></code>.</p>
<p>If the frame has data for only a part of the image, you can specify the
rectangle for it using the <code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">y,</span> <span class="pre">s,</span> <span class="pre">v</span></code> keys, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="mi">200</span>  <span class="c1"># A 100x200 rectangle with its top left corner at (10, 5)</span>
</pre></div>
</div>
<p>Frames are created by composing the transmitted data onto a background canvas.
This canvas can be either a single color, or the pixels from a previous frame.
The composition can be of two types, either a simple replacement (<code class="docutils literal notranslate"><span class="pre">X=1</span></code>) key
or a full alpha blend (the default).</p>
<p>To use a background color for the canvas, specify the <code class="docutils literal notranslate"><span class="pre">Y</span></code> key as a 32-bit
RGBA color. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Y</span><span class="o">=</span><span class="mi">4278190335</span> <span class="c1"># 0xff0000ff opaque red</span>
<span class="n">Y</span><span class="o">=</span><span class="mi">16711816</span>   <span class="c1"># 0x00ff0088 translucent green (alpha=0.53)</span>
</pre></div>
</div>
<p>The default background color when none is specified is <code class="docutils literal notranslate"><span class="pre">0</span></code> i.e. a black,
transparent pixel.</p>
<p>To use the data from a previous frame, specify the <code class="docutils literal notranslate"><span class="pre">c</span></code> key which is a 1-based
frame number. Thus <code class="docutils literal notranslate"><span class="pre">c=1</span></code> refers to the root frame (the base image data),
<code class="docutils literal notranslate"><span class="pre">c=2</span></code> refers to the second frame and so on.</p>
<p>If the frame is composed of multiple rectangular blocks, these can be expressed
by using the <code class="docutils literal notranslate"><span class="pre">r</span></code> key. When specifying the <code class="docutils literal notranslate"><span class="pre">r</span></code> key the data for an existing
frame is edited. The same composition operation as above happens, but now the
background canvas is the existing frame itself. <code class="docutils literal notranslate"><span class="pre">r</span></code> is a 1-based index, so
<code class="docutils literal notranslate"><span class="pre">r=1</span></code> is the root frame (base image data), <code class="docutils literal notranslate"><span class="pre">r=2</span></code> is the second frame and so
on.</p>
<p>Finally, while transferring frame data, the frame <em>gap</em> can also be specified
using the <code class="docutils literal notranslate"><span class="pre">z</span></code> key. The gap is the number of milliseconds to wait before
displaying the next frame when the animation is running. A value of <code class="docutils literal notranslate"><span class="pre">z=0</span></code> is
ignored, <code class="docutils literal notranslate"><span class="pre">z=positive</span> <span class="pre">number</span></code> sets the gap to the specified number of
milliseconds and <code class="docutils literal notranslate"><span class="pre">z=negative</span> <span class="pre">number</span></code> creates a <em>gapless</em> frame. Gapless
frames are not displayed to the user since they are instantly skipped over,
however they can be useful as the base data for subsequent frames. For example,
for an animation where the background remains the same and a small object or two
move.</p>
</section>
<section id="controlling-animations">
<h3>Controlling animations<a class="headerlink" href="#controlling-animations" title="Permalink to this heading">#</a></h3>
<p>Clients can control animations by using the <code class="docutils literal notranslate"><span class="pre">a=a</span></code> key in the escape code sent
to the terminal.</p>
<p>The simplest is client driven animations, where the client transmits the frame
data and then also instructs the terminal to make a particular frame the current
frame.  To change the current frame, use the <code class="docutils literal notranslate"><span class="pre">c</span></code> key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">a</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">7</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>This will make the seventh frame in the image with id <code class="docutils literal notranslate"><span class="pre">3</span></code> the current frame.</p>
<p>However, client driven animations can be sub-optimal, since the latency between
the client and terminal is unknown and variable especially over the network.
Also they require the client to remain running for the lifetime of the
animation, which is not desirable for cat like utilities.</p>
<p>Terminal driven animations are achieved by the client specifying <em>gaps</em> (time
in milliseconds) between frames and instructing the terminal to stop or start
the animation.</p>
<p>The animation state is controlled by the <code class="docutils literal notranslate"><span class="pre">s</span></code> key. <code class="docutils literal notranslate"><span class="pre">s=1</span></code> stops the
animation. <code class="docutils literal notranslate"><span class="pre">s=2</span></code> runs the animation, but in <em>loading</em> mode, in this mode when
reaching the last frame, instead of looping, the terminal will wait for the
arrival of more frames. <code class="docutils literal notranslate"><span class="pre">s=3</span></code> runs the animation normally, after the last
frame, the terminal loops back to the first frame. The number of loops can be
controlled by the <code class="docutils literal notranslate"><span class="pre">v</span></code> key. <code class="docutils literal notranslate"><span class="pre">v=0</span></code> is ignored, <code class="docutils literal notranslate"><span class="pre">v=1</span></code> is loop infinitely,
and any other positive number is loop <code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">-</span> <span class="pre">1</span></code> times. Note that stopping
the animation resets the loop counter.</p>
<p>Finally, the <em>gap</em> for frames can be set using the <code class="docutils literal notranslate"><span class="pre">z</span></code> key. This can be
specified either when the frame is created as part of the transmit escape code
or separately using the animation control escape code. The <em>gap</em> is the time in
milliseconds to wait before displaying the next frame in the animation.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Ga</span><span class="o">=</span><span class="n">a</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="mi">48</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>This sets the gap for the third frame of the image with id <code class="docutils literal notranslate"><span class="pre">7</span></code> to <code class="docutils literal notranslate"><span class="pre">48</span></code>
milliseconds. Note that <em>gapless</em> frames are not displayed to the user since
the next frame comes immediately, however they can be useful to store base data
for subsequent frames, such as in an animation with an object moving against a
static background.</p>
<p>In particular, the first frame or <em>root frame</em> is created with the base image
data and has no gap, so its gap must be set using this control code.</p>
</section>
<section id="composing-animation-frames">
<h3>Composing animation frames<a class="headerlink" href="#composing-animation-frames" title="Permalink to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.22.0: </span>Support for frame composition</p>
</div>
<p>Clients can <em>compose</em> animation frames, this means that they can compose pixels
in rectangular regions from one frame onto another frame. This allows for fast
and low band-width modification of frames.</p>
<p>To achieve this use the <code class="docutils literal notranslate"><span class="pre">a=c</span></code> key. The source frame is specified with
<code class="docutils literal notranslate"><span class="pre">r=frame</span> <span class="pre">number</span></code> and the destination frame as <code class="docutils literal notranslate"><span class="pre">c=frame</span> <span class="pre">number</span></code>. The size of
the rectangle is specified as <code class="docutils literal notranslate"><span class="pre">w=width,h=height</span></code> pixels. If unspecified, the
full image width and height are used. The offset of the rectangle from the
top-left corner for the source frame is specified by the <code class="docutils literal notranslate"><span class="pre">x,y</span></code> keys and the
destination frame by the <code class="docutils literal notranslate"><span class="pre">X,Y</span></code> keys. The composition operation is specified
by the <code class="docutils literal notranslate"><span class="pre">C</span></code> key with the default being to alpha blend the source rectangle
onto the destination rectangle. With <code class="docutils literal notranslate"><span class="pre">C=1</span></code> it will be a simple replacement
of pixels. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span><span class="n">_Gi</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">r</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span><span class="n">h</span><span class="o">=</span><span class="mi">27</span><span class="p">,</span><span class="n">X</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">Y</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="o">&lt;</span><span class="n">ESC</span><span class="o">&gt;</span>\
</pre></div>
</div>
<p>Will compose a <code class="docutils literal notranslate"><span class="pre">23x27</span></code> rectangle located at <code class="docutils literal notranslate"><span class="pre">(4,</span> <span class="pre">8)</span></code> in the <code class="docutils literal notranslate"><span class="pre">7th</span> <span class="pre">frame</span></code>
onto the rectangle located at <code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">3)</span></code> in the <code class="docutils literal notranslate"><span class="pre">9th</span> <span class="pre">frame</span></code>. These will be
in the image with <code class="docutils literal notranslate"><span class="pre">id=1</span></code>.</p>
<p>If the frames or the image are not found the terminal emulator must
respond with <cite>ENOENT</cite>. If the rectangles go out of bounds of the image
the terminal must respond with <cite>EINVAL</cite>. If the source and destination frames are
the same and the rectangles overlap, the terminal must respond with <cite>EINVAL</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In kitty, doing a composition will cause a frame to be <em>fully rendered</em>
potentially increasing its storage requirements, when the frame was previously
stored as a set of operations on other frames. If this happens and there
is not enough storage space, kitty will respond with ENOSPC.</p>
</div>
</section>
</section>
<section id="image-persistence-and-storage-quotas">
<h2>Image persistence and storage quotas<a class="headerlink" href="#image-persistence-and-storage-quotas" title="Permalink to this heading">#</a></h2>
<p>In order to avoid <em>Denial-of-Service</em> attacks, terminal emulators should have a
maximum storage quota for image data. It should allow at least a few full
screen images.  For example the quota in kitty is 320MB per buffer. When adding
a new image, if the total size exceeds the quota, the terminal emulator should
delete older images to make space for the new one. In kitty, for animations,
the additional frame data is stored on disk and has a separate, larger quota of
five times the base quota.</p>
</section>
<section id="control-data-reference">
<h2>Control data reference<a class="headerlink" href="#control-data-reference" title="Permalink to this heading">#</a></h2>
<p>The table below shows all the control data keys as well as what values they can
take, and the default value they take when missing. All integers are 32-bit.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">a</span></code></p></td>
<td><p>Single character.
<code class="docutils literal notranslate"><span class="pre">(a,</span> <span class="pre">c,</span> <span class="pre">d,</span> <span class="pre">f,</span> <span class="pre">``</span>
<span class="pre">``p,</span> <span class="pre">q,</span> <span class="pre">t,</span> <span class="pre">T)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">t</span></code></p></td>
<td><p>The overall action this graphics command is performing.
<code class="docutils literal notranslate"><span class="pre">t</span></code> - transmit data, <code class="docutils literal notranslate"><span class="pre">T</span></code> - transmit data and display image,
<code class="docutils literal notranslate"><span class="pre">q</span></code> - query terminal, <code class="docutils literal notranslate"><span class="pre">p</span></code> - put (display) previous transmitted image,
<code class="docutils literal notranslate"><span class="pre">d</span></code> - delete image, <code class="docutils literal notranslate"><span class="pre">f</span></code> - transmit data for animation frames,
<code class="docutils literal notranslate"><span class="pre">a</span></code> - control animation, <code class="docutils literal notranslate"><span class="pre">c</span></code> - compose animation frames</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">q</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Suppress responses from the terminal to this graphics command.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p><strong>Keys for image transmission</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">f</span></code></p></td>
<td><p>Positive integer.
<code class="docutils literal notranslate"><span class="pre">(24,</span> <span class="pre">32,</span> <span class="pre">100)</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">32</span></code></p></td>
<td><p>The format in which the image data is sent.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">t</span></code></p></td>
<td><p>Single character.
<code class="docutils literal notranslate"><span class="pre">(d,</span> <span class="pre">f,</span> <span class="pre">t,</span> <span class="pre">s)</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span></code></p></td>
<td><p>The transmission medium used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p>Positive integer.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The width of the image being sent.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">v</span></code></p></td>
<td><p>Positive integer.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The height of the image being sent.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">S</span></code></p></td>
<td><p>Positive integer.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The size of data to read from a file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">O</span></code></p></td>
<td><p>Positive integer.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The offset from which to read data from a file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i</span></code></p></td>
<td><p>Positive integer.
<code class="docutils literal notranslate"><span class="pre">(0</span> <span class="pre">-</span> <span class="pre">4294967295)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The image id</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">I</span></code></p></td>
<td><p>Positive integer.
<code class="docutils literal notranslate"><span class="pre">(0</span> <span class="pre">-</span> <span class="pre">4294967295)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The image number</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">p</span></code></p></td>
<td><p>Positive integer.
<code class="docutils literal notranslate"><span class="pre">(0</span> <span class="pre">-</span> <span class="pre">4294967295)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The placement id</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">o</span></code></p></td>
<td><p>Single character.
<code class="docutils literal notranslate"><span class="pre">only</span> <span class="pre">z</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>The type of data compression.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p>zero or one</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Whether there is more chunked data available.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p><strong>Keys for image display</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The left edge (in pixels) of the image area to display</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The top edge (in pixels) of the image area to display</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">w</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The width (in pixels) of the image area to display. By default, the entire width is used</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">h</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The height (in pixels) of the image area to display. By default, the entire height is used</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The x-offset within the first cell at which to start displaying the image</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Y</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The y-offset within the first cell at which to start displaying the image</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The number of columns to display the image over</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The number of rows to display the image over</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Cursor movement policy. <code class="docutils literal notranslate"><span class="pre">0</span></code> is the default, to move the cursor to after the image.
<code class="docutils literal notranslate"><span class="pre">1</span></code> is to not move the cursor at all when placing the image.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">U</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">1</span></code> to create a virtual placement for a Unicode placeholder.
<code class="docutils literal notranslate"><span class="pre">1</span></code> is to not move the cursor at all when placing the image.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">z</span></code></p></td>
<td><p>32-bit integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The <em>z-index</em> vertical stacking order of the image</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p><strong>Keys for animation frame loading</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The left edge (in pixels) of where the frame data should be updated</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The top edge (in pixels) of where the frame data should be updated</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The 1-based frame number of the frame whose image data serves as the base data
when creating a new frame, by default the base data is black, fully transparent pixels</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The 1-based frame number of the frame that is being edited. By default, a new frame is created</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">z</span></code></p></td>
<td><p>32-bit integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The gap (in milliseconds) of this frame from the next one. A value of
zero is ignored. Negative values create a <em>gapless</em> frame. If not specified,
frames have a default gap of <code class="docutils literal notranslate"><span class="pre">40ms</span></code>. The root frame defaults to zero gap.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">X</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The composition mode for blending pixels when creating a new frame or
editing a frame's data. The default is full alpha blending. <code class="docutils literal notranslate"><span class="pre">1</span></code> means a
simple overwrite.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Y</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The background color for pixels not
specified in the frame data. Must be in 32-bit RGBA format</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p><strong>Keys for animation frame composition</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The 1-based frame number of the frame whose image data serves as the overlaid data</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The 1-based frame number of the frame that is being edited.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The left edge (in pixels) of the destination rectangle</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The top edge (in pixels) of the destination rectangle</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">w</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The width (in pixels) of the source and destination rectangles. By default, the entire width is used</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">h</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The height (in pixels) of the source and destination rectangles. By default, the entire height is used</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">X</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The left edge (in pixels) of the source rectangle</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Y</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The top edge (in pixels) of the source rectangle</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The composition mode for blending
pixels. Default is full alpha blending. <code class="docutils literal notranslate"><span class="pre">1</span></code> means a simple overwrite.</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p><strong>Keys for animation control</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code> - stop animation, <code class="docutils literal notranslate"><span class="pre">2</span></code> - run animation, but wait for new frames, <code class="docutils literal notranslate"><span class="pre">3</span></code> - run animation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The 1-based frame number of the frame that is being affected</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">z</span></code></p></td>
<td><p>32-bit integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The gap (in milliseconds) of this frame from the next one. A value of
zero is ignored. Negative values create a <em>gapless</em> frame.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The 1-based frame number of the frame that should be made the current frame</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">v</span></code></p></td>
<td><p>Positive integer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>The number of loops to play. <code class="docutils literal notranslate"><span class="pre">0</span></code> is
ignored, <code class="docutils literal notranslate"><span class="pre">1</span></code> is play infinite and is the default and larger number
means play that number <code class="docutils literal notranslate"><span class="pre">-1</span></code> loops</p></td>
</tr>
<tr class="row-even"><td colspan="4"><p><strong>Keys for deleting images</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">d</span></code></p></td>
<td><p>Single character.
<code class="docutils literal notranslate"><span class="pre">(a,</span> <span class="pre">A,</span> <span class="pre">c,</span> <span class="pre">C,</span> <span class="pre">n,</span> <span class="pre">N,</span>
<span class="pre">i,</span> <span class="pre">I,</span> <span class="pre">p,</span> <span class="pre">P,</span> <span class="pre">q,</span> <span class="pre">Q,</span> <span class="pre">x,</span>
<span class="pre">X,</span> <span class="pre">y,</span> <span class="pre">Y,</span> <span class="pre">z,</span> <span class="pre">Z)</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">a</span></code></p></td>
<td><p>What to delete.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="interaction-with-other-terminal-actions">
<h2>Interaction with other terminal actions<a class="headerlink" href="#interaction-with-other-terminal-actions" title="Permalink to this heading">#</a></h2>
<p>When resetting the terminal, all images that are visible on the screen must be
cleared.  When switching from the main screen to the alternate screen buffer
(1049 private mode) all images in the alternate screen must be cleared, just as
all text is cleared. The clear screen escape code (usually <code class="docutils literal notranslate"><span class="pre">&lt;ESC&gt;[2J</span></code>) should
also clear all images. This is so that the clear command works.</p>
<p>The other commands to erase text must have no effect on graphics.
The dedicated delete graphics commands must be used for those.</p>
<p>When scrolling the screen (such as when using index cursor movement commands,
or scrolling through the history buffer), images must be scrolled along with
text. When page margins are defined and the index commands are used, only
images that are entirely within the page area (between the margins) must be
scrolled. When scrolling them would cause them to extend outside the page area,
they must be clipped.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="keyboard-protocol.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Comprehensive keyboard handling in terminals</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="underlines.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Colored and styled underlines</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Kovid Goyal
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/kovidgoyal/kitty" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Terminal graphics protocol</a><ul>
<li><a class="reference internal" href="#getting-the-window-size">Getting the window size</a></li>
<li><a class="reference internal" href="#a-minimal-example">A minimal example</a></li>
<li><a class="reference internal" href="#the-graphics-escape-code">The graphics escape code</a></li>
<li><a class="reference internal" href="#transferring-pixel-data">Transferring pixel data</a><ul>
<li><a class="reference internal" href="#rgb-and-rgba-data">RGB and RGBA data</a></li>
<li><a class="reference internal" href="#png-data">PNG data</a></li>
<li><a class="reference internal" href="#compression">Compression</a></li>
<li><a class="reference internal" href="#the-transmission-medium">The transmission medium</a><ul>
<li><a class="reference internal" href="#local-client">Local client</a></li>
<li><a class="reference internal" href="#remote-client">Remote client</a></li>
</ul>
</li>
<li><a class="reference internal" href="#querying-support-and-available-transmission-mediums">Querying support and available transmission mediums</a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-images-on-screen">Display images on screen</a><ul>
<li><a class="reference internal" href="#controlling-displayed-image-layout">Controlling displayed image layout</a></li>
<li><a class="reference internal" href="#unicode-placeholders">Unicode placeholders</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deleting-images">Deleting images</a></li>
<li><a class="reference internal" href="#suppressing-responses-from-the-terminal">Suppressing responses from the terminal</a></li>
<li><a class="reference internal" href="#requesting-image-ids-from-the-terminal">Requesting image ids from the terminal</a></li>
<li><a class="reference internal" href="#animation">Animation</a><ul>
<li><a class="reference internal" href="#transferring-animation-frame-data">Transferring animation frame data</a></li>
<li><a class="reference internal" href="#controlling-animations">Controlling animations</a></li>
<li><a class="reference internal" href="#composing-animation-frames">Composing animation frames</a></li>
</ul>
</li>
<li><a class="reference internal" href="#image-persistence-and-storage-quotas">Image persistence and storage quotas</a></li>
<li><a class="reference internal" href="#control-data-reference">Control data reference</a></li>
<li><a class="reference internal" href="#interaction-with-other-terminal-actions">Interaction with other terminal actions</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/tabs.js"></script>
    <script src="_static/custom.js"></script>
    </body>
</html>